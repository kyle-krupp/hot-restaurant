<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Hot Restaurant</title>

    <!--bootstrap cdn-->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
        crossorigin="anonymous">
    <!--custom css-->
    <!-- <link rel="stylesheet" href="./assets/style.css"> -->

</head>

<body>

    <div class="container">
        <div class="jumbotron">
            <h1 class="text-center">
                Hot Restaurant
            </h1>
            <hr>
            <h2 class="text-center">We only have 5 tables! Book your seat before they all are gone!</h2>


            <div class="text-center">
                <a href="/tables">
                    <button type="button" class="btn btn-lg btn-primary">
                        View Tables
                    </button>
                    <a href="/reserve">
                        <button type="button" class="btn btn-lg btn-danger">
                            Make Reservation

                        </button>

                    </a>
            </div>
        </div>

        <a href="/api/tables">API Table Link</a> | <a href="api/waitlist">API Wait List</a>
    </div>







    <script src="https://code.jquery.com/jquery.js"></script>
    <!-- <script src="./logic.js"></script> -->
    <script>
        console.log('HELLLPPPP MEEEEEEE')
        const reserves = () => {

            let url = window.location.origin
            $.ajax({
                url: url + '/api/waitlist',
                method: GET,
            }).done((waitlistData) => {
                console.log(waitlistData);

                waitlistData.forEach(element => {
                    console.log(element)
                })
            })
        }

        $('.submit').on('click', () => {
            let reservations = {
                customerName: $('#name').val().trim(),
                customerNumber: $('#number').val().trim(),
                customerEmail: $('#email').val().trim(),
                customerId: $('#id').val().trim()
            };

            let currentURL = window.location.origin

            console.log(currentURL)

            $.post(`${currentURL}/api/waitlist`, reservations, (data) => {
                console.log(data)

                if (!data) {
                    console.log('You are on the waitlist')
                } else {
                    console.log('Right this way to a table')
                }

                $('#name').val("")
                $('#number').val("")
                $('#email').val("")
                $('#id').val("")
            })
            return false;
        });

        reserves()
    </script>
</body>

</html>